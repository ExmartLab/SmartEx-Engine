- name: "rule 1 (coffee)"
  ruleId: "1"
  ruleEntry:
    name: "Rule: Block High Coffee Consumption (sc1)"
    entity_id: "automation.test_scenario_watching_tv_light_off"
    state: "activated"
  triggers:
    - name: "state"
      entity_id: "scene.state_change"
      state: "changed"
  conditions:
    - name: "daily energy consumption"
      entity_id: "smartplug coffee machine"
      state: "higher than the threshold"
  actions:
    - name: "Smart Plug Social Room Coffee"
      entity_id: "switch.smart_plug_social_room_coffee"
      state: "off"
  ownerId: "1"
  ruleDescription: "Rule_1: allows coffee to be made only until the daily energy consumption threshold is reached"
  priority: 2

- name: "rule 1.5 (coffee)"
  ruleId: "1.5"
  ruleEntry:
    name: "Rule: Turn on Coffee machine"
    entity_id: "artificially_added"
    state: "inactive"
  triggers:
    - name: "state"
      entity_id: "scene.state_change"
      state: "changed"
  conditions:
    - name: "Lab TV"
      entity_id: "media_player.lab_tv"
      state: "idle"
  actions:
    - name: "Smart Plug Social Room Coffee"
      entity_id: "switch.smart_plug_social_room_coffee"
      state: "on"
  ownerId: "1"
  ruleDescription: "Rule_1: an artifical rule to create the foil. Turns on the coffee machine if the Lab TV is in idle"
  priority: 1

- name: "rule 2.5 (tv loud)"
  ruleId: "2.5"
  ruleEntry:
    name: "Rule: Turn tv loud at 8am (artificial)"
    entity_id: "automation.sc2_multi_user_conflict"
    state: "activated"
  triggers:
    - name: "Time"
      entity_id: "sensor.worldclock_sensor"
      state: "08:00"
  actions:
    - name: "tv"
      entity_id: "scene.tv_playing"
      state: "loud"
  ownerId: "2"
  ruleDescription: "Rule_2: an artificial rule to create the foil. turns the tv loud at 8am"
  priority: 1

- name: "rule 2 (tv mute)"
  ruleId: "2"
  ruleEntry:
    name: "Rule: Block TV Audio During Meeting (sc2) happened"
    entity_id: "automation.sc2_multi_user_conflict"
    state: "activated"
  triggers:
  - name: "Lab TV"
    entity_id: "media_player.lab_tv"
    state: "playing"
  conditions:
  - name: "a meeting in room 1"
    entity_id: "calendar"
    state: "happening"
  actions:
  - name: "tv"
    entity_id: "scene.tv_playing"
    state: "mute"
  ownerId: "2"
  ruleDescription: "Rule_2: mutes the TV if TV is playing while a meeting is going on"
  priority: 2

- name: "Meeting room not occupied"
  ruleId: "3"
  ruleEntry:
    name: "Rule: Meeting Room Not Occupied"
    entity_id: "automation.rule_meeting_room_not_occupied"
    state: "activated"
  triggers:
  - name: "Contact Sensor Meeting Room Opening"
    entity_id: "binary_sensor.lumi_lumi_sensor_magnet_aq2_opening_2"
    state: "activated"
  conditions:
  - name: "meeting room"
    entity_id: "binary_sensor.lumi_lumi_sensor_motion_aq2_motion_2"
    state: "empty"
  actions:
  - name: "Meeting Room Status Light"
    entity_id: "light.meeting_room_status_light"
    state: "green"
  ownerId: "2"
  ruleDescription: "Rule_3: turns the meeting room status light green if the room is not occupied"
  priority: 3

- name: "Meeting room occupied"
  ruleId: "4"
  ruleEntry:
    name: "Rule: Meeting Room Occupied"
    entity_id: "automation.rule_meeting_room_occupied"
    state: "activated"
  triggers:
  - name: "Meeting Room Door"
    entity_id: "binary_sensor.lumi_lumi_sensor_magnet_aq2_opening_2"
    state: "opening"
  conditions:
  - name: "Occupancy of the meeting room"
    entity_id: "binary_sensor.lumi_lumi_sensor_motion_aq2_motion_2"
    state: "Detected"
  actions:
  - name: "Meeting Room Status Light"
    entity_id: "light.meeting_room_status_light"
    state: "orange"
  ownerId: "2"
  ruleDescription: "Rule_4: turns the meeting room status light orange if the room is occupied"
  priority: 4

- name: "Rain at lunch"
  ruleId: "5"
  ruleEntry:
    name: "Rule: Rain At Lunch Warning"
    entity_id: "automation.rule_rain_at_lunch_warning"
    state: "activated"
  triggers:
  - name: "Forecast Xmart-Lab"
    entity_id: "weather.xmart_lab"
    state: "rainy"
  conditions:
  - name: "Time"
    entity_id: "sensor.worldclock_sensor"
    state: "11:00-13:00"
  actions:
  - name: "Meeting Room Status Light"
    entity_id: "light.meeting_room_status_light"
    state: "blue"
  ownerId: "2"
  ruleDescription: "Rule_5: turns all lights blue if rain at lunch is expected"
  priority: 5

- name: "Sunny at lunch"
  ruleId: "6"
  ruleEntry:
    name: "Rule: Sunny At Lunch"
    entity_id: "automation.rule_rain_at_lunch_warning"
    state: "activated"
  triggers:
  - name: "Forecast Xmart-Lab"
    entity_id: "weather.xmart_lab"
    state: "sunny"
  conditions:
  - name: "Time"
    entity_id: "sensor.worldclock_sensor"
    state: "11:00-13:00"
  actions:
  - name: "Meeting Room Status Light"
    entity_id: "light.meeting_room_status_light"
    state: "orange"
  ownerId: "2"
  ruleDescription: "Rule_5: turns all lights orange if rain at lunch is expected"
  priority: 6

- name: "Danger"
  ruleId: "7"
  ruleEntry:
    name: "Rule: Danger"
    entity_id: "automation.danger"
    state: "activated"
  triggers:
  - name: "Smoke"
    entity_id: "binary_sensor.smoke_detector"
    state: "detected"
  - name: "CO2"
    entity_id: "binary_sensor.co2_detector"
    state: "detected"
  - name: "Fire alarm"
    entity_id: "binary_sensor.fire_alarm"
    state: "on"
  conditions:
  - name: "Time"
    entity_id: "sensor.worldclock_sensor"
    state: "08:00-18:00"
  actions:
  - name: "Meeting Room Status Light"
    entity_id: "light.meeting_room_status_light"
    state: "orange"
  ownerId: "2"
  ruleDescription: "Rule_7: turns the meeting room status light orange if danger occurs"
  priority: 7

